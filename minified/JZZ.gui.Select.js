!function(n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n:"function"==typeof define&&define.amd?define("JZZ.gui.Select",["JZZ"],n):n(JZZ)}(function(e){function o(n,t){var e,o=[n._none];if(t)for(e=0;e<t.length;e++)o.push(t[e].name);for(e=n._sel.options.length-1;0<=e;e--)n._sel.remove(e);for(e=0;e<o.length;e++)n._sel[e]=new Option(o[e],o[e],o[e]==n._name,o[e]==n._name)}function i(n,t){t=function(n){var t={};if(n&&n.at)return t.at=n.at,t.none=n.none||"=== NONE ===","string"==typeof t.at&&(t.at=document.getElementById(t.at)),t;throw"missing parameter"}(t);n._sel=t.at,n._none=t.none,n.select(n._none),n._sel.addEventListener("change",function(){n.select(n._sel.options[n._sel.selectedIndex].value)})}function c(n,t){setTimeout(function(){n.onSelect(t)},0)}function r(n){if(!(this instanceof r))return new r(n);var t=this;i(t,n),e().onChange(function(){o(t,e().info().inputs)})}function u(n){if(!(this instanceof u))return new u(n);var t=this;i(t,n),e().onChange(function(){o(t,e().info().outputs)})}e.gui||(e.gui={}),e.gui.SelectMidiIn||(((r.prototype=new e.Widget).constructor=r).prototype.onSelect=function(){},r.prototype.select=function(n){var t=this;n!=t._name&&(n==t._none&&(t._port&&(t._port.disconnect(t),t._port.close()),t._port=void 0,t._name=t._none,o(t,e().info().inputs),c(t,t._name)),e().openMidiIn(n).or(function(){o(t,e().info().inputs)}).and(function(){t._port&&(t._port.disconnect(t),t._port.close()),t._port=this,t._name=this.info().name,t._port.connect(t),o(t,e().info().inputs),c(t,t._name)}))},((u.prototype=new e.Widget).constructor=u).prototype.onSelect=function(){},u.prototype.select=function(n){var t=this;n!=t._name&&(n==t._none&&(t._port&&(t.disconnect(t._port),t._port.close()),t._port=void 0,t._name=t._none,o(t,e().info().outputs),c(t,t._name)),e().openMidiOut(n).or(function(){o(t,e().info().outputs)}).and(function(){t._port&&(t.disconnect(t._port),t._port.close()),t._port=this,t._name=this.info().name,t.connect(t._port),o(t,e().info().outputs),c(t,t._name)}))},e.gui.SelectMidiIn=r,e.gui.SelectMidiOut=u)});